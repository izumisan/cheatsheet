# C++11

C++11で追加・変更点のうち、よく使いそうなものを覚書

__cplusplusマクロ値は`201103L`

# `auto`（型推論）

# `decltype`（型の取得）

# 範囲for文（range-based for loop）

```cpp
for ( const auto& item : array ) { doSomething(); }
for ( auto&& item : array ) { doSomething(); }
```

# 初期化リスト（initializer lists）

# 左辺値・右辺値・ムーブ

# ラムダ式

クロージャ（関数オブジェクトのクラス）を定義する構文

`auto`又は`std::function`でラムダ式を保持できる.

## 構文

 `[キャプチャリスト](パラメータリスト) mutable 例外仕様 属性 -> 戻り値の型 { 関数の本体 }`

```cpp {.line-numbers}
// 何もしないラムダ式
auto hoge = []{};

// 引数の()や->は省略できる
auto hello = []{ std::cout << "Hello World" << std::endl; };

// int plus( int a, int b ) 関数をラムダ式で表現
// ラムダ式で戻り値の型を省略した場合は、return文から型推論される
auto plus = []( int a, int b ){ return a + b };
int result = plus( 2, 3 );
```

## キャプチャ

|記法|説明|
|---|---|
|`[&]`|参照キャプチャ|
|`[=]`|コピーキャプチャ|
|`[&x]`|変数xを参照キャプチャ|
|`[x]`|変数xをコピーキャプチャ|
|`[this]`|メンバ変数を参照キャプチャ|
|`[&, x]`|変数xはコピー、その他は参照キャプチャ|
|`[=, &x]`|変数xは参照、その他はコピーキャプチャ|
|`[this, &x]`|メンバ変数を参照、変数xを参照キャプチャ|

# `nullptr`

# `constexpr`

# `default`, `delete`宣言

# 移譲コンストラクタ（delegating constructors）

初期化子から同じクラスの別のコンストラクタを呼び出す.

```cpp {.line-numbers}
class Foo
{
public:
  Foo()
    : Foo(123)  // 移譲コンストラクタ
  {}
  Foo( const int value )
    : m_value(value)
  {}
private:
  int m_value;
```

# メンバ変数の初期化

# 継承コンストラクタ（inheriting constructors）

# `override`, `final`

# `enum class`（スコープ付き列挙型）

# 戻り値の後置構文

# ヒアドキュメントリテラル（`R"(xxx)"`）

# utf-8文字列リテラル（`u8"xxx"`）

# `std::begin()`, `std::end()`（先頭・末尾イテレータを取得する非メンバ関数）

# `std::all_of()`, `std::any_of()`, `std::none_of()`

# `std::minmax()`, `std::minmax_element()`（最小値と最大値を同時に取得する関数）

# `std::shared_ptr<T>`, `std::unique_ptr<T>`（スマートポインタ）

# `std::to_string()`（数値を文字列に変換する関数）

# `std::stoi()`, `std::stof()`（文字列を数値に変換する関数）

# `std::tuple`（タプルオブジェクト）

# `std::system_error`（システムエラー例外クラス）

# `<chrono>`（時間ユーティリティライブラリ）

# `<type_traits>`（型操作ライブラリ）

# `<regex>`（正規表現ライブラリ）

# `<random>`（乱数ライブラリ）

# GCCでC++11を有効にする

次のオプションを指定する

|ver|option|
|---|---|
|4.3～4.6|-std=c++0x|
|4.7以降|-std=c++11|

# 参考

- [C++11 - Wikipedia](https://ja.wikipedia.org/wiki/C%2B%2B11)
- [C++11 - cpprefjp C++日本語リファレンス](https://cpprefjp.github.io/lang/cpp11.html)
